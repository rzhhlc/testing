<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Famous Sayings - Puzzle Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=Inter:wght@400;700&display=swap');

        :root {
            --fancy-gold: #d4af37;
            --fancy-dark: #1a1a1a;
        }

        body {
            background-color: #f3f4f6;
            font-family: 'Inter', sans-serif;
            height: 100vh;
            margin: 0;
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }

        .fancy-title {
            font-family: 'Uncial Antiqua', cursive;
            color: var(--fancy-dark);
            text-shadow: 1px 1px 0px rgba(0,0,0,0.1);
        }

        .puzzle-border {
            border: 8px solid transparent;
            padding: 10px;
            border-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath fill='none' stroke='%23d4af37' stroke-width='4' d='M5 5h90v90H5zM10 10h80v80H10zM15 15h70v70H15z'/%3E%3Ccircle cx='5' cy='5' r='4' fill='%23d4af37'/%3E%3Ccircle cx='95' cy='5' r='4' fill='%23d4af37'/%3E%3Ccircle cx='5' cy='95' r='4' fill='%23d4af37'/%3E%3Ccircle cx='95' cy='95' r='4' fill='%23d4af37'/%3E%3C/svg%3E") 30 stretch;
            background: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            max-height: 40%; 
        }

        .letter-box {
            width: 30px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #333;
            background: #fff;
            font-weight: bold;
            font-size: 1.15rem;
            text-transform: uppercase;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .letter-box.empty {
            background: #e5e7eb;
            border-color: #d1d5db;
        }

        .letter-box.space {
            border: none;
            background: transparent;
            width: 12px;
        }

        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(13, 1fr);
            gap: 6px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .alphabet-btn {
            height: 38px;
            font-size: 1.1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border: 1px solid #e5e7eb;
            background-color: #ffffff;
            color: #4338ca;
            border-radius: 0.5rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .alphabet-btn:hover {
            background-color: #eef2ff;
            border-color: #c7d2fe;
        }

        .alphabet-btn.used {
            text-decoration: line-through;
            background-color: #f3f4f6;
            color: #9ca3af;
            border-color: #e5e7eb;
            box-shadow: none;
            opacity: 0.5;
            pointer-events: none;
        }

        .celebration {
            animation: bounce 0.5s infinite alternate;
        }

        @keyframes bounce {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .feedback-icon {
            font-size: 3rem;
            line-height: 1;
        }

        /* Example Modal Styles */
        #example-overlay {
            transition: opacity 0.3s ease-in-out;
            z-index: 100;
        }
        
        .example-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
            border: 4px solid var(--fancy-gold);
            position: relative;
        }

        .gold-glow {
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
        }
    </style>
</head>
<body class="p-2 md:p-4">

    <!-- Example View (Hidden by default) -->
    <div id="example-overlay" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="example-card gold-glow max-w-2xl w-full p-12 rounded-3xl text-center text-white">
            <!-- Return Button -->
            <button onclick="hideExample()" class="absolute top-6 right-6 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-full text-xs font-bold border border-white/30 transition flex items-center gap-2">
                <span>‚Üê</span> Return to puzzle
            </button>
            
            <div class="mb-8">
                <h2 class="fancy-title text-3xl text-[#d4af37] mb-6">How to Play</h2>
                <div class="h-1 w-24 bg-[#d4af37] mx-auto rounded-full"></div>
            </div>

            <div class="space-y-6 text-xl leading-relaxed italic text-gray-200">
                <p>If you think (or search for) ‚ÄúWheel of Fortune‚Äù you will know what to do.</p>
                <p class="text-2xl font-bold text-indigo-300">Have fun!</p>
            </div>
            
            <div class="mt-10 pt-8 border-t border-white/10">
                <button onclick="hideExample()" class="bg-[#d4af37] text-black px-8 py-3 rounded-full font-bold hover:scale-105 transition shadow-lg">Got it!</button>
            </div>
        </div>
    </div>

    <div class="flex-grow flex flex-col max-w-6xl mx-auto w-full overflow-hidden">
        <!-- Header -->
        <div class="text-center mb-1 flex-shrink-0">
            <h1 class="fancy-title text-2xl md:text-3xl">Famous Sayings</h1>
        </div>

        <!-- Main Game Area -->
        <div class="flex flex-col lg:flex-row gap-4 flex-grow overflow-hidden mb-2">
            
            <div class="flex-grow flex flex-col overflow-hidden">
                <!-- Puzzle Container -->
                <div id="puzzle-container" class="puzzle-border flex flex-wrap justify-center gap-1 flex-grow content-center overflow-y-auto">
                    <!-- Boxes injected by JS -->
                </div>

                <!-- Feedback and Status -->
                <div class="flex items-center justify-between px-4 py-2 h-16 bg-white/70 rounded-xl mt-2 flex-shrink-0 border border-gray-100">
                    <div id="feedback-area" class="flex items-center gap-3">
                        <div id="feedback-icon" class="feedback-icon opacity-0">üòä</div>
                        <div id="feedback-text" class="text-lg font-bold"></div>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px] text-gray-500 uppercase font-bold tracking-tighter">Guesses</div>
                        <div id="guess-count" class="text-3xl font-black text-indigo-600 leading-none">0</div>
                    </div>
                </div>

                <!-- Control Buttons -->
                <div class="flex flex-wrap gap-2 justify-center mt-2 flex-shrink-0">
                    <button onclick="newGame()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow transition">New Puzzle</button>
                    <button id="solve-btn" onclick="activateSolveMode()" class="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow transition">I Can Solve It!</button>
                    <button onclick="giveUp()" class="bg-rose-500 hover:bg-rose-600 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow transition">I Give Up</button>
                    <button onclick="showExample()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow transition">Example</button>
                </div>

                <!-- Alphabet Grid (Moved here, below buttons) -->
                <div class="bg-white p-2 rounded-xl shadow-md border border-gray-200 mt-2 flex-shrink-0">
                    <div id="alphabet-grid" class="alphabet-grid">
                        <!-- Buttons injected by JS (13 per row) -->
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="w-full lg:w-64 flex flex-col gap-2 flex-shrink-0 lg:flex-shrink overflow-hidden">
                <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-sm mb-2 border-b pb-1">Puzzle ID</h3>
                    <div class="flex gap-1">
                        <input type="text" id="id-input" placeholder="ID#" class="w-full border rounded px-2 py-1 text-center font-mono text-sm">
                        <button onclick="loadFromInput()" class="bg-gray-800 text-white px-3 py-1 rounded text-sm hover:bg-black transition">Go</button>
                    </div>
                    <p class="text-[10px] text-gray-400 mt-1">ID: <span id="current-id-display" class="font-bold"></span></p>
                </div>

                <!-- Scoreboard (Height adjusted to 2/3) -->
                <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col overflow-hidden h-[180px]">
                    <h3 class="font-bold text-sm mb-2 border-b pb-1">Scoreboard</h3>
                    <div class="flex-grow overflow-y-auto pr-1">
                        <table class="w-full text-xs">
                            <thead>
                                <tr class="text-gray-500 text-[9px] uppercase">
                                    <th class="pb-1 text-left">ID</th>
                                    <th class="pb-1 text-left">Score</th>
                                    <th class="pb-1 text-left">Eff%</th>
                                </tr>
                            </thead>
                            <tbody id="score-history">
                                <!-- Rows injected by JS -->
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-2 pt-2 border-t text-center font-bold text-indigo-600 text-[10px]">
                        Total Guesses: <span id="total-guesses">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const APHORISMS = [
            "A barking dog never bites", "A bird in the hand is worth two in the bush", "A chain is only as strong as its weakest link",
            "A change is as good as a rest", "A dog is a man‚Äôs best friend", "A fool and his money are soon parted",
            "A foolish consistency is the hobgoblin of little minds", "A friend in need is a friend indeed", "A good beginning makes a good ending",
            "A jack of all trades is master of none", "A job worth doing is worth doing well", "A little learning is a dangerous thing",
            "A man is known by the company he keeps", "A man with one clock knows what time it is, a man with two clocks is never sure",
            "A man‚Äôs home is his castle", "A miss is as good as a mile", "A new broom sweeps clean", "A nod is as good as a wink to a blind man",
            "A penny saved is a penny earned", "A place for everything and everything in its place", "A poor craftsman blames his tools",
            "A rising tide lifts all boats", "A rolling stone gathers no moss", "A rose by any other name would smell as sweet",
            "A soft answer turneth away wrath", "A stitch in time saves nine", "A thing of beauty is a joy forever",
            "A watched pot never boils", "A woman‚Äôs place is in the home", "A woman‚Äôs work is never done", "A word to the wise is sufficient",
            "Absence makes the heart grow fonder", "Actions speak louder than words", "All for one and one for all", "All that glitters is not gold",
            "All the world‚Äôs a stage", "All things come to those who wait", "All we learn from history is that we learn nothing from history",
            "All work and no play makes Jack a dull boy", "All‚Äôs fair in love and war", "All‚Äôs well that ends well", "Always cut the cards",
            "An apple a day keeps the doctor away", "An army marches on its stomach", "An ounce of prevention is worth a pound of cure",
            "Any port in a storm", "Anything that can go wrong will go wrong", "Appearances can be deceiving", "April showers bring May flowers",
            "As you sow so shall you reap", "Ask a silly question and you‚Äôll get a silly answer", "Ask and it shall be given",
            "Ask and you shall receive", "Ask no questions and hear no lies", "Bad news travels fast", "Barking dogs seldom bite",
            "Be careful you don‚Äôt go from the frying pan into the fire", "Be it ever so humble there‚Äôs no place like home",
            "Be not penny wise and pound foolish", "Beauty is in the eye of the beholder", "Beauty is only skin deep",
            "Before you judge a man you should walk a mile in his shoes", "Beggars can‚Äôt be choosers", "Behind every successful man is a woman",
            "Better late than never", "Better safe than sorry", "Better the devil you know than the devil you don‚Äôt",
            "Better to have it and not need it than to need it and not have it", "Better to have loved and lost than never to have loved at all",
            "Better to light a candle than to curse the darkness", "Birds of a feather flock together", "Blood is thicker than water",
            "Boys will be boys", "Brevity is the soul of wit", "Build a better mousetrap and the world will beat a path to your door",
            "Business before pleasure", "Candy is dandy but liquor is quicker", "Carpe diem ‚Ä¶ seize the day",
            "Cast your bread upon the water and it will be returned a hundred-fold", "Chickens will come home to roost",
            "Children should be seen and not heard", "Cleanliness is next to godliness", "Cold hands warm heart", "Common sense is not so common",
            "Cream always rises to the top", "Crime does not pay", "Discretion is the better part of valor", "Do as I say not as I do",
            "Do unto others as you would have them do unto you", "Don‚Äôt Wait Until It Rains To Build Your Ark",
            "Don‚Äôt bite off more than you can chew", "Don‚Äôt bite the hand that feeds you", "Don‚Äôt burn the candle at both ends",
            "Don‚Äôt burn your bridges behind you", "Don‚Äôt change horses in midstream", "Don‚Äôt close the barn door after the horse runs away",
            "Don‚Äôt count your chickens before they hatch", "Don‚Äôt cry over spilt milk", "Don‚Äôt cut off your nose to spite your face",
            "Don‚Äôt fire until you see the whites of their eyes", "Don‚Äôt foul your own nest", "Don‚Äôt give up the ship",
            "Don‚Äôt hide your light under a bushel", "Don‚Äôt judge a book by its cover", "Don‚Äôt kill the goose that lays the golden eggs",
            "Don‚Äôt look a gift horse in the mouth", "Don‚Äôt make mountains out of molehills", "Don‚Äôt put all your eggs in one basket",
            "Don‚Äôt put the cart before the horse", "Don‚Äôt shoot the messenger", "Don‚Äôt speak ill of the dead", "Don‚Äôt spit into the wind",
            "Don‚Äôt take any wooden nickels", "Don‚Äôt throw out the baby with the bath water", "Don‚Äôt throw pearls before swine",
            "Doubt is the beginning not the end of wisdom", "Early to bed early to rise makes a man healthy wealthy and wise",
            "Easier said than done", "East is East and West is West and never the twain shall meet", "East or west home is best",
            "Easy come easy go", "Eat to live; don‚Äôt live to eat", "Eat drink and be merry for tomorrow we die",
            "Even a broken clock is right twice a day", "Every cloud has a silver lining", "Every dog has his day", "Every man has a price",
            "Everybody talks about the weather but nobody does anything about it", "Expect the unexpected", "Experience is the best teacher",
            "Faith will move mountains", "Familiarity breeds contempt", "Feed a cold starve a fever", "Finders keepers losers weepers",
            "First come first served", "Flattery will get you nowhere", "Fools rush in where angels fear to tread",
            "For want of a nail a kingdom was lost", "Forewarned is forearmed", "Forgive and forget", "Forgive them for they know not what they do",
            "Gather ye rosebuds while ye may", "Genius Is 1 Percent Inspiration And 99 Percent Perspiration",
            "Give a man a fish and you feed him for a day; teach a man to fish and you feed him for a ifetime",
            "Give him an inch and he‚Äôll take a mile", "Give him enough rope and he‚Äôll hang himself", "Give the devil his due",
            "God helps those who help themselves", "Good fences make good neighbors", "Good gifts come in small packages",
            "Great minds think alike", "Great oaks from little acorns grow", "Grin and bear it", "Half a loaf is better than none",
            "Handsome is as handsome does", "Haste makes waste", "He that is not with me is against me",
            "He who fights and runs away lives to fight another day", "He who hesitates is lost", "He who laughs last laughs best",
            "He who lives by the sword shall die by the sword", "He who pays the piper calls the tune", "Hell hath no fury like a woman scorned",
            "Here today gone tomorrow", "History repeats itself", "Hitch your wagon to a star", "Home is where the heart is",
            "Honesty is the best policy", "Hope springs eternal in the human breast", "Hunger is the best sauce", "I think therefore I am",
            "Idle hands are the devil‚Äôs workshop", "If at first you don‚Äôt succeed try try again", "If it‚Äôs not broke don‚Äôt fix it",
            "If it‚Äôs not one thing it‚Äôs another", "If the shoe fits wear it", "If wishes were fishes then no man would starve",
            "If wishes were horses then beggars would ride", "If you can‚Äôt beat them join them", "If you can‚Äôt stand the heat get out of the kitchen",
            "If you do what you‚Äôve always done you‚Äôll get what you‚Äôve always got", "If you lie down with dogs you wake up with fleas",
            "If you snooze you lose", "Ignorance is bliss", "Imitation is the sincerest form of flattery",
            "In for a penny in for a pound", "In the country of the blind the one-eyed man is king", "It never rains but it pours",
            "It takes a thief to catch a thief", "It takes two to tango", "It‚Äôll all come out in the wash",
            "It‚Äôs an ill wind that blows no good", "It‚Äôs every man for himself", "It‚Äôs never too late to mend", "It‚Äôs no use beating a dead horse",
            "It‚Äôs not over till it‚Äôs over", "It‚Äôs not over until the fat lady sings", "It‚Äôs not the knowing that is difficult but the doing",
            "It‚Äôs not whether you win or lose but how you play the game", "It‚Äôs the squeaky wheel that gets the grease",
            "It‚Äôs time to fish or cut bait", "Keep a stiff upper lip", "Keep your eyes peeled", "Keep your fingers crossed",
            "Keep your head above water", "Keep your nose to the grindstone", "Know thyself", "Know which side your bread is buttered on",
            "Knowledge is power", "Laugh and the world laughs with you; weep and you weep alone", "Laughter is the best medicine",
            "Leave no stone unturned", "Leave well enough alone", "Let bygones be bygones", "Let he who is without sin cast the first stone",
            "Let nature takes its course", "Let sleeping dogs lie", "Let‚Äôs cross the bridge when we come to it", "Life is short art is long",
            "Lightning never strikes twice in the same place", "Little pitchers have big ears", "Little strokes fell great oaks",
            "Live and learn", "Live and let live", "Live every day as if it were your last", "Look before you leap", "Love conquers all",
            "Love is blind", "Love makes the world go ‚Äôround", "Make a virtue of necessity", "Make haste slowly", "Make hay while the sun shines",
            "Man cannot live by bread alone", "Man proposes God disposes", "Many are called but few are chosen", "Many hands make light work",
            "Marry in haste repent at leisure", "Measure twice cut once", "Might makes right", "Mind your P‚Äôs and Q‚Äôs", "Misery loves company",
            "Money isn‚Äôt everything", "Murder will out", "Music hath charms to soothe the savage breast", "Nature abhors a vacuum",
            "Necessity is the mother of invention", "Never give a sucker an even break", "Never judge a book by its cover",
            "Never put off until tomorrow what you can do today", "Never say die", "No good deed goes unrewarded", "No man can serve two masters",
            "No man is an island", "No news is good news", "No pain no gain", "Nothing is certain but death and taxes",
            "Nothing Ventured Nothing Gained", "Oil and water don‚Äôt mix", "Old habits die hard", "Once bitten twice shy",
            "One good turn deserves another", "One man‚Äôs loss is another man‚Äôs gain", "One man‚Äôs meat is another man‚Äôs poison",
            "One man‚Äôs trash is another man‚Äôs treasure", "One picture is worth a thousand words", "One rotten apple spoils the barrel",
            "Opportunity never knocks twice", "Opposites attract", "Out of sight out of mind",
            "People who live in glass houses shouldn‚Äôt throw stones", "Politics makes strange bedfellows", "Possession is nine-tenths of the law",
            "Power corrupts; absolute power corrupts absolutely", "Practice makes perfect", "Practice what you preach", "Pride goeth before a fall",
            "Procrastination is the thief of time", "Rats desert a sinking ship", "Revenge is a dish best eaten cold", "Revenge is sweet",
            "Rome wasn‚Äôt built in a day", "Seeing is believing", "Seek and ye shall find", "Share and share alike", "Silence is golden",
            "Sink or swim", "Slow but steady wins the race", "Spare the rod and spoil the child", "Still waters run deep",
            "Stone walls do not a prison make", "Strike while the iron is hot", "Take the bitter with the sweet", "Take the bull by the horns",
            "That‚Äôs life", "That‚Äôs the way the ball bounces", "The apple doesn‚Äôt fall far from the tree", "The bad workman always blames his tools",
            "The best things in life are free", "The best-laid plans of mice and men often go awry", "The bigger they come the harder they fall",
            "The burnt child shuns the fire", "The child is the father of the man", "The course of true love never did run smooth",
            "The devil can cite Scripture for his purpose", "The early bird gets the worm", "The end justifies the means",
            "The eyes are the windows to the soul", "The grass is always greener on the other side", "The hotter the battle the sweeter the victory",
            "The leopard cannot change its spots", "The longest journey begins with but a single footstep", "The love of money is the root of all evil",
            "The meek shall inherit the earth", "The more the merrier", "The more things change the more they stay the same",
            "The pen is mightier than sword", "The proof of the pudding is in the eating", "The quality of mercy is not strained",
            "The road to Hell is paved with good intentions", "The sea refuses no river", "The show must go on",
            "The teacher appears when the student is ready", "The truth will out", "The walls have ears", "The way to a man‚Äôs heart is through his stomach",
            "The wish is father of the deed", "There ain‚Äôt no such thing as a free lunch",
            "There are old soldiers and bold soldiers but there are no old bold soldiers", "There are plenty of fish in the sea",
            "There are two sides to every question", "There is nothing good or bad but thinking makes it so",
            "There‚Äôs no right way to do the wrong thing", "There‚Äôs a first time for everything", "There‚Äôs many a slip ‚Äòtwixt the cup and the lip",
            "There‚Äôs method in his madness", "There‚Äôs more than one way to skin a cat", "There‚Äôs no accounting for taste",
            "There‚Äôs no defense like a good offense", "There‚Äôs no disputing about taste", "There‚Äôs no fool like an old fool",
            "There‚Äôs no place like home", "There‚Äôs no rest for the wicked", "There‚Äôs no such thing as a free lunch",
            "There‚Äôs nothing new under the sun", "There‚Äôs something rotten in Denmark", "Things aren‚Äôt always what they seem", "This Too Shall Pass",
            "Those who cannot remember the past are condemned to repeat it", "Time and tide wait for no man", "Time heals all wounds",
            "Time is money", "Time is of the essence", "To err is human to forgive divine", "Too many cooks spoil the broth",
            "Truth is stranger than fiction", "Turn the other cheek", "Turnabout is fair play", "Two heads are better than one",
            "Two wrongs don‚Äôt make a right", "Two‚Äôs company three‚Äôs a crowd", "Uneasy lies the head that wears a crown", "Variety is the spice of life",
            "Waste not want not", "Water seeks its own level", "Well begun is half done", "We‚Äôre too soon old and too late smart",
            "What can‚Äôt be cured must be endured", "What goes around comes around", "What goes up must come down", "What will be will be",
            "What you see is what you get", "What‚Äôs good for the goose is good for the gander", "When all you have are lemons make lemonade",
            "When in Rome do as the Romans do", "When it rains it pours", "When the cat‚Äôs away the mice will play",
            "When the going gets tough the tough get going", "When your only tool is a hammer every problem looks like a nail",
            "Where there‚Äôs a will there‚Äôs a way", "Where there‚Äôs smoke there‚Äôs fire", "While there‚Äôs life there‚Äôs hope",
            "Who pays the piper calls the tune", "Winners never quit and quitters never win", "You can catch more flies with honey than with vinegar",
            "You can fool some of the people all of the time and all of the people some of the time", "You can kill a man but you can‚Äôt kill an idea",
            "You can lead a horse to water but you can‚Äôt make it drink", "You can take the boy out of the country but you can‚Äôt take the country out of the boy",
            "You can‚Äôt steer a parked car", "You can‚Äôt fight city hall", "You can‚Äôt fit a round peg in a square hole",
            "You can‚Äôt get the toothpaste back in the tube", "You can‚Äôt go home again", "You can‚Äôt have your cake and eat it too",
            "You can‚Äôt make a silk purse out of a sow‚Äôs ear", "You can‚Äôt make an omelet without breaking eggs", "You can‚Äôt squeeze blood from a turnip",
            "You can‚Äôt take it with you", "You can‚Äôt teach an old dog new tricks", "You can‚Äôt tell a book by its cover", "You can‚Äôt unring a bell",
            "You can‚Äôt unscramble an egg", "You don‚Äôt get something for nothing", "You get what you pay for", "You have to take the good with the bad",
            "You made your bed now lie in it", "You need to take a bull by the horns and a man by his word", "You need to stop to smell the roses",
            "You pays your money and you takes your choice", "You take what you need and you leave the rest", "You‚Äôre never too old to learn."
        ];

        let state = {
            currentPhrase: "",
            id: 0,
            revealed: new Set(),
            guessed: new Set(),
            numGuesses: 0,
            distinctLetters: 0,
            solveMode: false,
            isGameOver: false,
            history: []
        };

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            if (type === 'happy') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(440, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'bluh') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(50, audioCtx.currentTime + 0.4);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else if (type === 'fanfare') {
                const now = audioCtx.currentTime;
                [523, 659, 783, 1046].forEach((f, i) => {
                    const o = audioCtx.createOscillator();
                    const g = audioCtx.createGain();
                    o.type = 'sine';
                    o.frequency.value = f;
                    o.connect(g);
                    g.connect(audioCtx.destination);
                    g.gain.setValueAtTime(0, now);
                    g.gain.linearRampToValueAtTime(0.1, now + (i * 0.1));
                    g.gain.linearRampToValueAtTime(0, now + 1);
                    o.start(now);
                    o.stop(now + 1);
                });
            }
        }

        function updateFeedback(icon, text, type) {
            const iconEl = document.getElementById('feedback-icon');
            const textEl = document.getElementById('feedback-text');
            iconEl.innerText = icon;
            textEl.innerText = text;
            iconEl.classList.remove('opacity-0');
            
            if (type === 'happy') {
                textEl.className = "text-lg font-bold text-emerald-600";
            } else {
                textEl.className = "text-lg font-bold text-rose-600";
            }
        }

        function createAlphabet() {
            const grid = document.getElementById('alphabet-grid');
            if (!grid) return;
            grid.innerHTML = "";
            "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(char => {
                const btn = document.createElement('button');
                btn.innerText = char;
                btn.className = "alphabet-btn";
                btn.id = `btn-${char}`;
                btn.onclick = () => handleGuess(char);
                grid.appendChild(btn);
            });
        }

        function renderPuzzle() {
            const container = document.getElementById('puzzle-container');
            container.innerHTML = "";
            const words = state.currentPhrase.split(" ");

            words.forEach((word, wordIndex) => {
                const wordWrapper = document.createElement('div');
                wordWrapper.className = "flex gap-1 mb-1";
                
                word.split("").forEach(char => {
                    const box = document.createElement('div');
                    const isLetter = /[a-zA-Z]/.test(char);
                    const isApostrophe = char === "‚Äô" || char === "'";
                    
                    if (isLetter) {
                        const upperChar = char.toUpperCase();
                        if (state.revealed.has(upperChar)) {
                            box.className = "letter-box";
                            box.innerText = upperChar;
                        } else {
                            box.className = "letter-box empty";
                            box.innerText = "";
                        }
                    } else {
                        box.className = "letter-box space";
                        box.innerText = char;
                    }
                    wordWrapper.appendChild(box);
                });

                container.appendChild(wordWrapper);
                
                if (wordIndex < words.length - 1) {
                    const spaceBox = document.createElement('div');
                    spaceBox.className = "letter-box space";
                    container.appendChild(spaceBox);
                }
            });
        }

        function initPhrase(index) {
            const phrase = APHORISMS[index];
            state.currentPhrase = phrase;
            state.id = index;
            state.revealed.clear();
            state.guessed.clear();
            state.numGuesses = 0;
            state.solveMode = false;
            state.isGameOver = false;

            const letters = phrase.toUpperCase().replace(/[^A-Z]/g, "").split("");
            const distinct = [...new Set(letters)];
            state.distinctLetters = distinct.length;

            let numToReveal = Math.max(2, Math.floor(distinct.length * 0.15));
            const shuffled = [...distinct].sort(() => 0.5 - Math.random());
            shuffled.slice(0, numToReveal).forEach(l => state.revealed.add(l));

            document.getElementById('guess-count').innerText = "0";
            document.getElementById('solve-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            document.getElementById('current-id-display').innerText = index;
            document.getElementById('feedback-icon').classList.add('opacity-0');
            document.getElementById('feedback-text').innerText = "";

            createAlphabet();
            renderPuzzle();
        }

        function handleGuess(char) {
            if (state.isGameOver) return;
            if (state.guessed.has(char) || state.revealed.has(char)) return;

            const upperPhrase = state.currentPhrase.toUpperCase();
            const isCorrect = upperPhrase.includes(char);
            
            const btn = document.getElementById(`btn-${char}`);
            if (btn) btn.classList.add('used');
            state.guessed.add(char);

            if (state.solveMode) {
                if (!isCorrect) {
                    gameOver(true);
                    return;
                }
            } else {
                state.numGuesses++;
            }
            
            document.getElementById('guess-count').innerText = state.numGuesses;

            if (isCorrect) {
                state.revealed.add(char);
                playSound('happy');
                updateFeedback('ü§©', 'Perfect!', 'happy');
                renderPuzzle();
                checkWin();
            } else {
                playSound('bluh');
                updateFeedback('ü§°', 'Oops!', 'sad');
            }
        }

        function checkWin() {
            const upperPhrase = state.currentPhrase.toUpperCase();
            const allFound = upperPhrase.split("").every(char => {
                if (!/[A-Z]/.test(char)) return true;
                return state.revealed.has(char);
            });

            if (allFound) {
                gameOver(false);
            }
        }

        function activateSolveMode() {
            if (state.isGameOver || state.solveMode) return;
            state.solveMode = true;
            document.getElementById('solve-btn').classList.add('opacity-50', 'cursor-not-allowed');
            updateFeedback('üïµÔ∏è', 'Solve it without a single error!', 'happy');
        }

        function giveUp() {
            if (state.isGameOver) return;
            gameOver(true);
        }

        function gameOver(isFailure) {
            state.isGameOver = true;
            "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(l => state.revealed.add(l));
            renderPuzzle();

            let finalScore = state.numGuesses;
            if (isFailure) {
                finalScore = 100;
                playSound('bluh');
                updateFeedback('üíÄ', 'Game Over!', 'sad');
            } else {
                playSound('fanfare');
                updateFeedback('üèÜ', 'Amazing!', 'happy');
                document.getElementById('puzzle-container').classList.add('celebration');
                setTimeout(() => {
                    document.getElementById('puzzle-container').classList.remove('celebration');
                }, 3000);
            }

            const efficiency = ((state.distinctLetters / finalScore) * 100).toFixed(1);
            state.history.push({ id: state.id, score: finalScore, eff: efficiency === "Infinity" ? "100" : efficiency });
            updateScoreboard();
        }

        function updateScoreboard() {
            const tbody = document.getElementById('score-history');
            tbody.innerHTML = "";
            let total = 0;
            state.history.slice().reverse().forEach(entry => {
                const row = `<tr>
                    <td class="font-mono">${entry.id}</td>
                    <td class="font-bold">${entry.score}</td>
                    <td>${entry.eff}%</td>
                </tr>`;
                tbody.innerHTML += row;
                total += entry.score;
            });
            document.getElementById('total-guesses').innerText = total;
        }

        function newGame() {
            const rand = Math.floor(Math.random() * APHORISMS.length);
            initPhrase(rand);
        }

        function loadFromInput() {
            const val = parseInt(document.getElementById('id-input').value);
            if (!isNaN(val) && val >= 0 && val < APHORISMS.length) {
                initPhrase(val);
            }
        }

        function showExample() {
            const overlay = document.getElementById('example-overlay');
            overlay.classList.remove('hidden');
            overlay.classList.add('flex');
            overlay.style.opacity = "0";
            setTimeout(() => overlay.style.opacity = "1", 10);
        }

        function hideExample() {
            const overlay = document.getElementById('example-overlay');
            overlay.style.opacity = "0";
            setTimeout(() => {
                overlay.classList.add('hidden');
                overlay.classList.remove('flex');
            }, 300);
        }

        window.onload = () => newGame();
    </script>
</body>
</html>